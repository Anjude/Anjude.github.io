{"version":3,"sources":["webpack:///src/views/common/login.vue","webpack:///./src/utils/validate.js","webpack:///./src/views/common/login.vue?1d75","webpack:///./src/views/common/login.vue"],"names":["login","data","giteeAuthUrl","this","global","baseUrl","dataForm","userAccount","password","uuid","captcha","dataRule","required","message","trigger","captchaPath","created","getCaptcha","methods","dataFormSubmit","isRegister","_this","$refs","validate","valid","s","email","test","$message","error","userApi","register","userPassword","userEmail","then","res","success","msg","console","log","code","expireTime","Date","getTime","$storage","set","accessToken","refreshToken","avatar","$router","replace","name","Object","utils","common_login","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","push","_v","ref","attrs","model","rules","status-icon","nativeOn","keyup","type","indexOf","_k","keyCode","key","prop","placeholder","value","callback","$$v","$set","expression","staticStyle","display","href","width","height","src","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/2.ee3c7a0614d8fa5a7e07.js","sourcesContent":["<template>\r\n  <div class=\"login-contain\">\r\n    <div @click=\"$router.push({ name: 'index' })\">\r\n      <h2>WEINDEX</h2>\r\n      <p>微意首页，打造程序员专属浏览器首页。</p>\r\n    </div>\r\n    <div class=\"login-main\">\r\n      <h3 class=\"login-title\">用户登录</h3>\r\n      <el-form\r\n        :model=\"dataForm\"\r\n        :rules=\"dataRule\"\r\n        ref=\"dataForm\"\r\n        @keyup.enter.native=\"dataFormSubmit()\"\r\n        status-icon\r\n      >\r\n        <el-form-item prop=\"userAccount\">\r\n          <el-input\r\n            v-model=\"dataForm.userAccount\"\r\n            placeholder=\"帐号\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\">\r\n          <el-input\r\n            v-model=\"dataForm.password\"\r\n            type=\"password\"\r\n            placeholder=\"密码\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"email\">\r\n          <el-input\r\n            v-model=\"dataForm.email\"\r\n            placeholder=\"注册请填写邮箱\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <!-- <el-form-item prop=\"captcha\">\r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"14\">\r\n                <el-input v-model=\"dataForm.captcha\" placeholder=\"验证码\">\r\n                </el-input>\r\n              </el-col>\r\n              <el-col :span=\"10\" class=\"login-captcha\">\r\n                <img :src=\"captchaPath\" @click=\"getCaptcha()\" alt=\"\" />\r\n              </el-col>\r\n            </el-row>\r\n          </el-form-item> -->\r\n        <div class=\"btn-box\">\r\n          <el-form-item>\r\n            <el-button class=\"login-btn-submit\" @click=\"dataFormSubmit(true)\"\r\n              >注册</el-button\r\n            >\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button\r\n              class=\"login-btn-submit\"\r\n              type=\"primary\"\r\n              @click=\"dataFormSubmit()\"\r\n              >登录</el-button\r\n            >\r\n          </el-form-item>\r\n        </div>\r\n      </el-form>\r\n      <el-form style=\"display: flex\">\r\n        第三方登录:\r\n        <a :href=\"giteeAuthUrl\">\r\n          <el-image\r\n            style=\"width: 80px; height: 30px\"\r\n            src=\"https://gitee.com/static/images/logo-black.svg?t=158106664\"\r\n          ></el-image>\r\n        </a>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getUUID } from '@/utils'\r\nimport {isEmail} from '@/utils/validate'\r\nimport userApi from '@/api/wei-index/userApi'\r\nexport default {\r\n  data() {\r\n    return {\r\n      giteeAuthUrl: `${this.global.baseUrl}/auth/gitee-render`,\r\n      dataForm: {\r\n        userAccount: '',\r\n        password: '',\r\n        uuid: '',\r\n        captcha: ''\r\n      },\r\n      dataRule: {\r\n        userAccount: [\r\n          { required: true, message: '帐号不能为空', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '密码不能为空', trigger: 'blur' }\r\n        ],\r\n        captcha: [\r\n          { required: true, message: '验证码不能为空', trigger: 'blur' }\r\n        ]\r\n      },\r\n      captchaPath: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.getCaptcha()\r\n  },\r\n  methods: {\r\n    // 提交表单\r\n    dataFormSubmit(isRegister) {\r\n      this.$refs['dataForm'].validate(valid => {\r\n        if (valid) {\r\n          if (isRegister) {\r\n            // 执行注册逻辑\r\n            if (!isEmail(this.dataForm.email)) {\r\n              this.$message.error('注册请填写邮箱')\r\n              return\r\n            }\r\n            userApi.register({\r\n              userAccount: this.dataForm.userAccount,\r\n              userPassword: this.dataForm.password,\r\n              userEmail: this.dataForm.email\r\n            }).then(res => {\r\n              this.$message.success(res.msg)\r\n            })\r\n          } else {\r\n            userApi\r\n              .login({\r\n                userAccount: this.dataForm.userAccount,\r\n                userPassword: this.dataForm.password,\r\n                uuid: this.dataForm.uuid,\r\n                captcha: this.dataForm.captcha\r\n              })\r\n              .then(res => {\r\n                console.log(res)\r\n                if (res && res.code === 200) {\r\n                  let expireTime = new Date(\r\n                    new Date().getTime() + res.data.expireTime * 60 * 1000\r\n                  )\r\n                  this.$storage.set('accessToken', res.data.accessToken)\r\n                  this.$storage.set('refreshToken', res.data.refreshToken)\r\n                  this.$storage.set('expireTime', expireTime)\r\n                  this.$storage.set('avatar', res.data.avatar)\r\n                  this.$router.replace({ name: 'index' })\r\n                  this.$message.success(res.msg)\r\n                } else {\r\n                  this.getCaptcha()\r\n                  this.$message.error(res.msg)\r\n                }\r\n              })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 获取验证码\r\n    getCaptcha() {\r\n      this.dataForm.uuid = getUUID()\r\n      // this.captchaPath = this.$http.adornUrl(\r\n      //   `/captcha.jpg?uuid=${this.dataForm.uuid}`\r\n      // )\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.login-contain {\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n\r\n  .login-main {\r\n    width: 30%;\r\n    margin: 0 auto;\r\n  }\r\n  .login-title {\r\n    font-size: 16px;\r\n  }\r\n  .btn-box {\r\n    display: flex;\r\n    width: 100%;\r\n    justify-content: space-around;\r\n    .login-btn-submit {\r\n      width: 100px;\r\n      margin-top: 38px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/common/login.vue","/**\n * 邮箱\n * @param {*} s\n */\nexport function isEmail (s) {\n  return /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(s)\n}\n\n/**\n * 手机号码\n * @param {*} s\n */\nexport function isMobile (s) {\n  return /^1[0-9]{10}$/.test(s)\n}\n\n/**\n * 电话号码\n * @param {*} s\n */\nexport function isPhone (s) {\n  return /^([0-9]{3,4}-)?[0-9]{7,8}$/.test(s)\n}\n\n/**\n * URL地址\n * @param {*} s\n */\nexport function isURL (s) {\n  return /^http[s]?:\\/\\/.*/.test(s)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/validate.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-contain\"},[_c('div',{on:{\"click\":function($event){return _vm.$router.push({ name: 'index' })}}},[_c('h2',[_vm._v(\"WEINDEX\")]),_vm._v(\" \"),_c('p',[_vm._v(\"微意首页，打造程序员专属浏览器首页。\")])]),_vm._v(\" \"),_c('div',{staticClass:\"login-main\"},[_c('h3',{staticClass:\"login-title\"},[_vm._v(\"用户登录\")]),_vm._v(\" \"),_c('el-form',{ref:\"dataForm\",attrs:{\"model\":_vm.dataForm,\"rules\":_vm.dataRule,\"status-icon\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.dataFormSubmit()}}},[_c('el-form-item',{attrs:{\"prop\":\"userAccount\"}},[_c('el-input',{attrs:{\"placeholder\":\"帐号\"},model:{value:(_vm.dataForm.userAccount),callback:function ($$v) {_vm.$set(_vm.dataForm, \"userAccount\", $$v)},expression:\"dataForm.userAccount\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"密码\"},model:{value:(_vm.dataForm.password),callback:function ($$v) {_vm.$set(_vm.dataForm, \"password\", $$v)},expression:\"dataForm.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"placeholder\":\"注册请填写邮箱\"},model:{value:(_vm.dataForm.email),callback:function ($$v) {_vm.$set(_vm.dataForm, \"email\", $$v)},expression:\"dataForm.email\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"btn-box\"},[_c('el-form-item',[_c('el-button',{staticClass:\"login-btn-submit\",on:{\"click\":function($event){return _vm.dataFormSubmit(true)}}},[_vm._v(\"注册\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{staticClass:\"login-btn-submit\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.dataFormSubmit()}}},[_vm._v(\"登录\")])],1)],1)],1),_vm._v(\" \"),_c('el-form',{staticStyle:{\"display\":\"flex\"}},[_vm._v(\"\\n      第三方登录:\\n      \"),_c('a',{attrs:{\"href\":_vm.giteeAuthUrl}},[_c('el-image',{staticStyle:{\"width\":\"80px\",\"height\":\"30px\"},attrs:{\"src\":\"https://gitee.com/static/images/logo-black.svg?t=158106664\"}})],1)])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d2a914e0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/common/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d2a914e0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d2a914e0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/common/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}