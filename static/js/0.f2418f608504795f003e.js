webpackJsonp([0],{"+Clx":function(e,t){},"4pX6":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("v3z6"),a=i("dLd/"),r=i.n(a),s={data:function(){return{logo:r.a}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"banner"},[t("img",{staticClass:"logo",attrs:{src:this.logo,alt:"banner"}})])},staticRenderFns:[]};var l=i("VU/8")(s,o,!1,function(e){i("Zp1j")},null,null).exports,c=i("vLgD"),u={baseUri:"/user_web",userSite:function(){return Object(c.a)({url:this.baseUri,method:"get"})},addSite:function(e){return Object(c.a)({url:this.baseUri,method:"post",data:{userWebName:e.userWebName,userWebIcon:e.userWebIcon,userWebUrl:e.userWebUrl,WebGroupId:e.WebGroupId,sort:2}})},updateSite:function(e){return Object(c.a)({url:this.baseUri,method:"put",data:{userWebId:e.websiteId,userWebName:e.websiteName,userWebIcon:e.websiteIcon,userWebUrl:e.websiteUrl}})},delSite:function(e){return Object(c.a)({url:this.baseUri+"/"+e,method:"delete"})}},d={props:{data:Array},data:function(){return{webForm:{},dialogFormVisible:!1}},created:function(){console.log(this.data)},methods:{clickSite:function(e,t){e.preventDefault(),this.dialogFormVisible=!0,this.webForm=t},editSite:function(e){var t=this;console.log(this.webForm),u.updateSite(this.webForm).then(function(e){t.$router.go(0)})},delSite:function(e){var t=this;console.log(this.webForm),u.delSite(this.webForm.websiteId).then(function(e){t.$router.go(0)}).catch(function(e){console.log(e)})}}},b={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{staticClass:"app-panel-container",attrs:{gutter:10}},e._l(e.data,function(t){return i("el-col",{key:t.websiteId,staticClass:"app-panel-item",attrs:{sm:10,md:8,lg:6}},[i("a",{attrs:{href:t.websiteUrl,target:"_blank"}},[i("el-card",{staticClass:"appList",attrs:{"body-style":{padding:"0px"}}},[i("i",{staticClass:"el-icon-edit",on:{click:function(i){return i.stopPropagation(),e.clickSite(i,t)}}}),e._v(" "),i("el-avatar",{staticClass:"web-icon",attrs:{size:50,src:t.websiteIcon?t.websiteIcon:t.websiteUrl+"/favicon.ico",shape:"square",fit:"fill"}},[e._v("SITE")]),e._v(" "),i("span",[e._v(e._s(t.websiteName))])],1)],1)])}),1),e._v(" "),i("el-dialog",{attrs:{title:"增加自定义网站",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.webForm}},[i("el-form-item",{attrs:{label:"网站名称","label-width":"120px"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.webForm.websiteName,callback:function(t){e.$set(e.webForm,"websiteName",t)},expression:"webForm.websiteName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"网站url"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.webForm.websiteUrl,callback:function(t){e.$set(e.webForm,"websiteUrl",t)},expression:"webForm.websiteUrl"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"网站icon"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.webForm.websiteIcon,callback:function(t){e.$set(e.webForm,"websiteIcon",t)},expression:"webForm.websiteIcon"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.delSite}},[e._v("删除网站")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.editSite}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f={components:{Block:i("VU/8")(d,b,!1,function(e){i("NrFQ")},null,null).exports},props:{siteData:Object},data:function(){return{engineSite:[],mySite:[],studySite:[],weiSite:[],editableTabsValue:0,webForm:{},dialogFormVisible:!1}},created:function(){},methods:{addSite:function(){var e=this;console.log(this.webForm),console.log(this.editableTabsValue),this.dialogFormVisible=!1,u.addSite({userWebName:this.webForm.name,userWebIcon:this.webForm.icon,userWebUrl:this.webForm.url,WebGroupId:+this.editableTabsValue+1}).then(function(t){e.$router.go(0)})}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tabs",{attrs:{type:"border-card",addable:""},on:{"tab-add":function(t){e.dialogFormVisible=!0}},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},[i("el-tab-pane",{key:"我的应用",attrs:{label:"我的应用"}},[i("Block",{attrs:{data:e.siteData.mySite}})],1),e._v(" "),i("el-tab-pane",{key:"微意应用",attrs:{label:"微意应用"}},[i("Block",{attrs:{data:e.siteData.weiSite}})],1),e._v(" "),i("el-tab-pane",{key:"充电中心",attrs:{label:"充电中心"}},[i("Block",{attrs:{data:e.siteData.studySite}})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"增加自定义网站",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.webForm}},[i("el-form-item",{attrs:{label:"网站名称","label-width":"120px"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.webForm.name,callback:function(t){e.$set(e.webForm,"name",t)},expression:"webForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"网站url"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.webForm.url,callback:function(t){e.$set(e.webForm,"url",t)},expression:"webForm.url"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"网站icon"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.webForm.icon,callback:function(t){e.$set(e.webForm,"icon",t)},expression:"webForm.icon"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.addSite}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},h=i("VU/8")(f,m,!1,null,null,null).exports,p={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var g=i("VU/8")({props:["data"]},p,!1,function(e){i("+Clx")},null,null).exports,v={baseUri:"/website",defaultSite:function(e){return Object(c.a)({url:this.baseUri,method:"get"})}},w={name:"WeIndex",data:function(){return{height:0,search:"",select:"",scrollElement:"",drawer:!1,isLogin:!1,avatar:"",indexSiteData:{}}},created:function(){this.getDefaultSite()},components:{Search:n.a,Banner:l,WebApp:h,DrawerBlock:g},methods:{getDefaultSite:function(){var e=this,t=this.$storage.get("expireTime");new Date(t)-new Date<=0?(console.log("未登陆或登陆过期，获取默认站点"),v.defaultSite().then(function(t){e.indexSiteData=t.data})):(console.log("已登录，获取用户站点"),u.userSite().then(function(t){e.indexSiteData=t.data||{}}),this.isLogin=!0,this.avatar=this.$storage.get("avatar"))},resetDocumentClientHeight:function(){var e=this;this.documentClientHeight=document.documentElement.clientHeight,window.onresize=function(){e.documentClientHeight=document.documentElement.clientHeight}},login:function(){}},mounted:function(){var e=this;this.height=document.documentElement.clientHeight-this.$refs.head.$el.clientHeight-this.$refs.side.$el.clientHeight-this.$refs.footer.$el.clientHeight,window.onresize=function(){e.height=document.documentElement.clientHeight-e.$refs.head.$el.clientHeight-e.$refs.side.$el.clientHeight-e.$refs.footer.$el.clientHeight-35}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"body"}},[n("el-container",[n("el-header",{ref:"head"},[n("div",{staticClass:"header-container"},[n("a",{attrs:{href:""}},[n("img",{staticClass:"header-logo",attrs:{src:i("iS6d"),alt:"banner"}})]),e._v(" "),n("div",{staticStyle:{flex:"1"}}),e._v(" "),n("router-link",{attrs:{to:"/login"}},[n("el-avatar",{staticStyle:{margin:"0 5px","line-height":"50px"},attrs:{size:50,src:e.isLogin?e.avatar:""}},[e._v("登录")])],1),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-setting"},on:{click:function(t){e.drawer=!0}}},[e._v("所有网站")])],1)]),e._v(" "),n("el-aside",{ref:"side"},[n("el-drawer",{attrs:{title:"我是标题",visible:e.drawer},on:{"update:visible":function(t){e.drawer=t}}},[n("DrawerBlock")],1)],1),e._v(" "),n("el-main",{ref:"main",style:{minHeight:e.height+"px"}},[n("el-row",[n("el-col",{attrs:{lg:{span:16,offset:4},md:{span:18,offset:3},sm:{span:20,offset:2}}},[n("Banner")],1),e._v(" "),n("el-col",{attrs:{lg:{span:16,offset:4},md:{span:18,offset:3},sm:{span:20,offset:2}}},[n("Search",{staticClass:"search-container",attrs:{searchEngine:e.indexSiteData.engineSite}})],1),e._v(" "),n("el-col",{attrs:{lg:{span:16,offset:4},md:{span:18,offset:3},sm:{span:20,offset:2}}},[n("WebApp",{attrs:{siteData:e.indexSiteData}})],1)],1)],1),e._v(" "),n("el-footer",{ref:"footer",attrs:{height:"35px"}},[n("p",{attrs:{target:"_blank"},on:{click:function(t){return e.$router.push({name:"aboutus"})}}},[e._v("\n        微意首页 · 关于我们\n      ")])])],1)],1)},staticRenderFns:[]};var F=i("VU/8")(w,_,!1,function(e){i("rdib")},null,null);t.default=F.exports},NrFQ:function(e,t){},Zp1j:function(e,t){},"dLd/":function(e,t,i){e.exports=i.p+"static/img/logo.100dae8.png"},fZ5y:function(e,t){},iS6d:function(e,t,i){e.exports=i.p+"static/img/weindex.a2f115b.png"},rdib:function(e,t){},v3z6:function(e,t,i){"use strict";var n={props:{searchEngine:Array},data:function(){return{query:"",searchEngineIndex:0}},methods:{search:function(){console.log(this.searchEngine),console.log(this.searchEngineIndex);var e=this.query;"影视资源"===this.searchEngine[this.searchEngineIndex].websiteName&&(e=encodeURI(e).replace(/%/gim,"_")+".html"),window.open(this.searchEngine[this.searchEngineIndex].websiteUrl+e)},setQuery:function(){this.query=this.query}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"margin-top":"15px"},attrs:{onload:"searchbox.focus()"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}}},[i("el-input",{staticClass:"input-with-select",attrs:{id:"searchbox",placeholder:"请输入内容"},on:{change:e.setQuery},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[i("el-select",{staticClass:"search-options",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchEngineIndex,callback:function(t){e.searchEngineIndex=t},expression:"searchEngineIndex"}},e._l(e.searchEngine,function(e,t){return i("el-option",{key:e.websiteName,attrs:{label:e.websiteName,value:t}})}),1),e._v(" "),i("el-button",{staticClass:"search-btn",attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(n,a,!1,function(e){i("fZ5y")},null,null);t.a=r.exports}});
//# sourceMappingURL=0.f2418f608504795f003e.js.map