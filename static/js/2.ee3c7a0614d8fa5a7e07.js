webpackJsonp([2],{iHaR:function(t,e){},wQTO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("0xDb");var s=a("BBgh"),o={data:function(){return{giteeAuthUrl:this.global.baseUrl+"/auth/gitee-render",dataForm:{userAccount:"",password:"",uuid:"",captcha:""},dataRule:{userAccount:[{required:!0,message:"帐号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],captcha:[{required:!0,message:"验证码不能为空",trigger:"blur"}]},captchaPath:""}},created:function(){this.getCaptcha()},methods:{dataFormSubmit:function(t){var e=this;this.$refs.dataForm.validate(function(a){if(a)if(t){if(r=e.dataForm.email,!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(r))return void e.$message.error("注册请填写邮箱");s.a.register({userAccount:e.dataForm.userAccount,userPassword:e.dataForm.password,userEmail:e.dataForm.email}).then(function(t){e.$message.success(t.msg)})}else s.a.login({userAccount:e.dataForm.userAccount,userPassword:e.dataForm.password,uuid:e.dataForm.uuid,captcha:e.dataForm.captcha}).then(function(t){if(console.log(t),t&&200===t.code){var a=new Date((new Date).getTime()+60*t.data.expireTime*1e3);e.$storage.set("accessToken",t.data.accessToken),e.$storage.set("refreshToken",t.data.refreshToken),e.$storage.set("expireTime",a),e.$storage.set("avatar",t.data.avatar),e.$router.replace({name:"index"}),e.$message.success(t.msg)}else e.getCaptcha(),e.$message.error(t.msg)});var r})},getCaptcha:function(){this.dataForm.uuid=Object(r.a)()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-contain"},[a("div",{on:{click:function(e){return t.$router.push({name:"index"})}}},[a("h2",[t._v("WEINDEX")]),t._v(" "),a("p",[t._v("微意首页，打造程序员专属浏览器首页。")])]),t._v(" "),a("div",{staticClass:"login-main"},[a("h3",{staticClass:"login-title"},[t._v("用户登录")]),t._v(" "),a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"status-icon":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.dataFormSubmit()}}},[a("el-form-item",{attrs:{prop:"userAccount"}},[a("el-input",{attrs:{placeholder:"帐号"},model:{value:t.dataForm.userAccount,callback:function(e){t.$set(t.dataForm,"userAccount",e)},expression:"dataForm.userAccount"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.dataForm.password,callback:function(e){t.$set(t.dataForm,"password",e)},expression:"dataForm.password"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{placeholder:"注册请填写邮箱"},model:{value:t.dataForm.email,callback:function(e){t.$set(t.dataForm,"email",e)},expression:"dataForm.email"}})],1),t._v(" "),a("div",{staticClass:"btn-box"},[a("el-form-item",[a("el-button",{staticClass:"login-btn-submit",on:{click:function(e){return t.dataFormSubmit(!0)}}},[t._v("注册")])],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"login-btn-submit",attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("登录")])],1)],1)],1),t._v(" "),a("el-form",{staticStyle:{display:"flex"}},[t._v("\n      第三方登录:\n      "),a("a",{attrs:{href:t.giteeAuthUrl}},[a("el-image",{staticStyle:{width:"80px",height:"30px"},attrs:{src:"https://gitee.com/static/images/logo-black.svg?t=158106664"}})],1)])],1)])},staticRenderFns:[]};var n=a("VU/8")(o,i,!1,function(t){a("iHaR")},null,null);e.default=n.exports}});
//# sourceMappingURL=2.ee3c7a0614d8fa5a7e07.js.map